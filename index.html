<!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us"> <head> <!-- Global site tag (gtag.js) - Google Analytics --> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2630485-14"></script> <script> window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'UA-2630485-14'); </script> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta http-equiv="content-type" content="text/html; charset=utf-8"> <!-- Enable responsiveness on mobile devices--> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"> <title> Inteist &middot; </title> <!-- CSS --> <link rel="stylesheet" href="/public/css/poole.css"> <link rel="stylesheet" href="/public/css/hyde.css"> <link href='//fonts.googleapis.com/css?family=Fjalla+One|Lato|Droid+Sans+Mono' rel='stylesheet' type='text/css'> <link rel="canonical" href=" https://inteist.com/" /> <!-- Default pygments --> <link rel="stylesheet" href="/public/css/extra/pygments/monokai.css"> <!-- Icons --> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png"> <link rel="shortcut icon" href="/public/favicon.ico"> <!-- RSS --> <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml"> <!-- Google Adsense Validation --> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9336216488761027" crossorigin="anonymous"></script> </head> <body> <div class="sidebar"> <div class="container sidebar-sticky"> <div class="sidebar-about"> <h1 id="site-name"> <a href="/"> Inteist </a> </h1> <p class="lead">I code for living</p> </div> <nav class="sidebar-nav"> <!-- <a class="sidebar-nav-item active" href="/">Home</a> --> <a class="sidebar-nav-item" href="/pages">Pages</a> <a class="sidebar-nav-item" href="/dev-resources">Dev Resources</a> <a class="sidebar-nav-item" href="/figlet">Figlet</a> <a class="sidebar-nav-item" href="/git">Git Tips</a> <div class="sidebar-spacer">&nbsp;</div> <a class="sidebar-nav-item" href="/search">Search</a> <a class="sidebar-nav-item" href="/calendar">Posts Calendar</a> <a class="sidebar-nav-item" href="/tags">Tags</a> <a class="sidebar-nav-item" href="/archive">Archive</a> <a class="sidebar-nav-item" href="/me">Me</a> </nav> <p class="copyright">&copy; 2010 - 2023</p> </div> </div> <div class="content container"> <div class="search-bar"> <a href="/search"><img src="/public/img/search-bar-l.png" alt="Search" height="60px"></a> </div> <div class="posts"> <div class="post"> <h1 class="post-title"> <a href="/crontab-cheatsheet/"> Crontab CheatSheet </a> </h1> <span class="post-date">20 Mar 2023</span> <div class="link-underline"> <p>#Useful Crontab CheatSheet</p> <h3 id="commands">Commands</h3> <ul> <li><strong>crontab -e</strong> → Edit or create a crontab file if doesn’t already exist. (This is the command you would want most of the times)</li> <li> crontab -l → Display the crontab file.</li> <li> crontab -r → Remove the crontab file.</li> <li> crontab -v → Display the last time you edited your crontab file. → (This option is only available on a few systems.)</li> </ul> <h3 id="params">Params</h3> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="syntax"><code><span class="k">*</span> <span class="k">*</span> <span class="k">*</span> <span class="k">*</span> <span class="k">*</span> <span class="nb">command </span>to be executed
– – – – –
| | | | |
| | | | +—– day of week <span class="o">(</span>0 – 6<span class="o">)</span> <span class="o">(</span><span class="nv">Sunday</span><span class="o">=</span>0<span class="o">)</span>
| | | +——- month <span class="o">(</span>1 – 12<span class="o">)</span>
| | +——— day of month <span class="o">(</span>1 – 31<span class="o">)</span>
| +———– hour <span class="o">(</span>0 – 23<span class="o">)</span>
+————- min <span class="o">(</span>0 – 59<span class="o">)</span>
</code></pre></div></div> </div> </div> <div class="post"> <h1 class="post-title"> <a href="/mongodump-backup-script/"> MongoDump - backup script example </a> </h1> <span class="post-date">14 Oct 2022</span> <div class="link-underline"> <p>An example script for backing up a database</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="syntax"><code><span class="c">#!/bin/bash</span>

<span class="nv">backupfolder</span><span class="o">=</span><span class="s2">"/backup/mongo/</span><span class="sb">`</span><span class="nb">date</span> +<span class="s2">"%Y-%m-%d_%H.%M"</span><span class="sb">`</span><span class="s2">"</span>
<span class="nv">db</span><span class="o">=</span><span class="s2">"db_to_backup"</span>

<span class="c"># do the dump</span>
mongodump <span class="nt">--uri</span><span class="o">=</span><span class="s2">"mongodb://user:pass@domain:27017/"</span> <span class="nt">--db</span><span class="o">=</span><span class="nv">$db</span>  <span class="nt">-v</span> <span class="nt">--gzip</span> <span class="nt">--out</span><span class="o">=</span><span class="nv">$backupfolder</span>

<span class="c"># repack with zip - 0 - just basically adding a password...</span>
zip <span class="nt">-0</span> <span class="nt">-P</span> alamoAlamo <span class="nv">$backupfolder</span>/backup.zip <span class="nv">$backupfolder</span>/<span class="nv">$db</span>/<span class="k">*</span>.gz 

<span class="c"># cleanup original *.gz files</span>
<span class="nb">rm</span> <span class="nt">-fR</span> <span class="nv">$backupfolder</span>/<span class="nv">$db</span>

</code></pre></div></div> </div> </div> <div class="post"> <h1 class="post-title"> <a href="/creating-nested-folders-bash/"> Creating Nested Folders with bash </a> </h1> <span class="post-date">11 Oct 2022</span> <div class="link-underline"> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="syntax"><code><span class="c">#</span>
<span class="c">#  5 level deep nested directory creation - this is roughly 65.5 million folders</span>
<span class="c">#</span>

<span class="c">#!/bin/bash</span>

<span class="k">for </span>p <span class="k">in</span> <span class="o">{</span>0..9<span class="o">}</span> <span class="o">{</span>a..z<span class="o">}</span>
<span class="k">do
  </span><span class="nb">cd</span> <span class="k">${</span><span class="nv">p</span><span class="k">}</span>
  <span class="k">for </span>m <span class="k">in</span> <span class="o">{</span>0..9<span class="o">}</span> <span class="o">{</span>a..z<span class="o">}</span>
  <span class="k">do
    </span><span class="nb">cd</span> <span class="k">${</span><span class="nv">m</span><span class="k">}</span>
    <span class="k">for </span>n <span class="k">in</span> <span class="o">{</span>0..9<span class="o">}</span> <span class="o">{</span>a..z<span class="o">}</span>
    <span class="k">do
      </span><span class="nb">mkdir</span> <span class="nv">$n</span>
      <span class="nb">cd</span> <span class="k">${</span><span class="nv">n</span><span class="k">}</span>
        <span class="k">for </span>y <span class="k">in</span> <span class="o">{</span>0..9<span class="o">}</span> <span class="o">{</span>a..z<span class="o">}</span> 
        <span class="k">do
          </span><span class="nb">mkdir</span> <span class="nv">$y</span>          
          <span class="nb">cd</span> <span class="k">${</span><span class="nv">y</span><span class="k">}</span>
          <span class="k">for </span>z <span class="k">in</span> <span class="o">{</span>0..9<span class="o">}</span> <span class="o">{</span>a..z<span class="o">}</span> 
          <span class="k">do
            </span><span class="nb">mkdir</span> <span class="nv">$z</span>
            <span class="c"># pwd         #you may want to avoid printint, or it will take foever even in a 3 level deep structure :)</span>
          <span class="k">done
          </span><span class="nb">cd</span> <span class="s2">".."</span>
        <span class="k">done
        </span><span class="nb">cd</span> <span class="s2">".."</span>
    <span class="k">done
    </span><span class="nb">cd</span> <span class="s2">".."</span>
  <span class="k">done
  </span><span class="nb">cd</span> <span class="s2">".."</span>
<span class="k">done</span>
</code></pre></div></div> <p>I have not tested the following but it should work and is somewhat simpler</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="syntax"><code>
<span class="c">#!/bin/bash</span>

<span class="k">for </span>p <span class="k">in</span> <span class="o">{</span>0..9<span class="o">}</span> <span class="o">{</span>a..z<span class="o">}</span>
<span class="k">do
    for </span>m <span class="k">in</span> <span class="o">{</span>0..9<span class="o">}</span> <span class="o">{</span>a..z<span class="o">}</span>
    <span class="k">do
        for </span>n <span class="k">in</span> <span class="o">{</span>0..9<span class="o">}</span> <span class="o">{</span>a..z<span class="o">}</span>
        <span class="k">do
            for </span>y <span class="k">in</span> <span class="o">{</span>0..9<span class="o">}</span> <span class="o">{</span>a..z<span class="o">}</span> 
            <span class="k">do
                for </span>z <span class="k">in</span> <span class="o">{</span>0..9<span class="o">}</span> <span class="o">{</span>a..z<span class="o">}</span> 
                <span class="k">do
                    </span><span class="nb">mkdir</span> <span class="nt">-p</span> <span class="s2">"./</span><span class="k">${</span><span class="nv">p</span><span class="k">}</span><span class="s2">/</span><span class="k">${</span><span class="nv">m</span><span class="k">}</span><span class="s2">/</span><span class="k">${</span><span class="nv">n</span><span class="k">}</span><span class="s2">/</span><span class="k">${</span><span class="nv">y</span><span class="k">}</span><span class="s2">/</span><span class="k">${</span><span class="nv">z</span><span class="k">}</span><span class="s2">
                done
            done
        done
    done
done

</span></code></pre></div></div> <p>another option for a flatter structure would be to use doubles i.e. <code class="language-html highlighter-rouge">00</code> <code class="language-html highlighter-rouge">01</code> <code class="language-html highlighter-rouge">02</code> ….. <code class="language-html highlighter-rouge">8b</code> <code class="language-html highlighter-rouge">8c</code> …..<code class="language-html highlighter-rouge">zz</code></p> <p>This gives you 36 * 36 = 1296 variations in the first level and then adding a second level would give you about a million combinations :) which if you think about it, even if each folder has 100 files - that 100 million files.</p> </div> </div> <div class="post"> <h1 class="post-title"> <a href="/super-easy-prevent-computer-sleeping/"> Super easy way to prevent your computer from sleeping </a> </h1> <span class="post-date">07 Oct 2022</span> <div class="link-underline"> <p>If you need to make sure your comouter doesn’t go to sleep, with the recent addition of wakelock to Chrome this is extremely easy to do.</p> <p>Open Chrome on any page</p> <p>Open the developer tools:</p> <p>Ctrl+Shift+C on Windows/Linux <br /> or<br /> ⌘ +⇧+C on Mac (Cmd+Shift+C)</p> <p>will open the dev tools - then go to the “Console” tab and paste/type this into the console</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="syntax"><code>let screenLock = await navigator.wakeLock.request('screen');
</code></pre></div></div> <p>That’s it. Your computer won’t sleep.</p> <p><strong>Note</strong> that you will lose the lock if you clos or change the tab.</p> </div> </div> <div class="post"> <h1 class="post-title"> <a href="/mongodb-adding-users-roles-databases/"> MongoDB adding users and roles to databases </a> </h1> <span class="post-date">07 Oct 2022</span> <div class="link-underline"> <h2 id="to-add-users--roles">To add users + roles</h2> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="syntax"><code>
    <span class="c1">// main admin user</span>
    <span class="nx">use</span> <span class="nx">admin</span>
    <span class="nx">db</span><span class="p">.</span><span class="nx">createUser</span><span class="p">({</span> <span class="na">user</span><span class="p">:</span> <span class="dl">"</span><span class="s2">***</span><span class="dl">"</span><span class="p">,</span> <span class="na">pwd</span><span class="p">:</span> <span class="nx">passwordPrompt</span><span class="p">(),</span> <span class="na">roles</span><span class="p">:</span> <span class="p">[{</span> <span class="na">role</span><span class="p">:</span> <span class="dl">"</span><span class="s2">root</span><span class="dl">"</span><span class="p">,</span> <span class="na">db</span><span class="p">:</span> <span class="dl">"</span><span class="s2">admin</span><span class="dl">"</span> <span class="p">},</span> <span class="p">{</span> <span class="na">role</span><span class="p">:</span> <span class="dl">"</span><span class="s2">dbOwner</span><span class="dl">"</span><span class="p">,</span> <span class="na">db</span><span class="p">:</span> <span class="dl">"</span><span class="s2">work_db</span><span class="dl">"</span> <span class="p">}]</span> <span class="p">})</span>

    <span class="c1">// specific DB user</span>
    <span class="nx">use</span> <span class="nx">work_db</span>
    <span class="nx">db</span><span class="p">.</span><span class="nx">createUser</span><span class="p">({</span> <span class="na">user</span><span class="p">:</span> <span class="dl">"</span><span class="s2">***</span><span class="dl">"</span><span class="p">,</span> <span class="na">pwd</span><span class="p">:</span> <span class="nx">passwordPrompt</span><span class="p">(),</span> <span class="na">roles</span><span class="p">:</span> <span class="p">[{</span> <span class="na">role</span><span class="p">:</span> <span class="dl">"</span><span class="s2">dbOwner</span><span class="dl">"</span><span class="p">,</span> <span class="na">db</span><span class="p">:</span> <span class="dl">"</span><span class="s2">work_db</span><span class="dl">"</span> <span class="p">}]</span> <span class="p">})</span>

</code></pre></div></div> <h2 id="connection-string">Connection string</h2> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="syntax"><code>connectionURI <span class="o">=</span> <span class="s2">"mongodb://user:pass@localhost:27017/?serverSelectionTimeoutMS=5000&amp;connectTimeoutMS=10000&amp;authSource=WORK_DB&amp;authMechanism=SCRAM-SHA-256"</span>
</code></pre></div></div> </div> </div> <div class="post"> <h1 class="post-title"> <a href="/mongo-db-backup-restore/"> Mongo DB Backup and Restore </a> </h1> <span class="post-date">07 Oct 2022</span> <div class="link-underline"> <p><code class="language-html highlighter-rouge">mongodump</code> is a tool for exporting the contents of a database as a binary file. Mongodump can export data from either mongod or mongos instances. It can also export data from standalone, replica set, and sharded cluster deployments.</p> <p>usages</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="syntax"><code>mongodump <span class="nt">--user</span><span class="o">=</span>myuser <span class="nt">--db</span><span class="o">=</span>mydb <span class="nt">--password</span><span class="o">=</span>somepass <span class="nt">--authenticationDatabase</span><span class="o">=</span>admin
</code></pre></div></div> <p>Or with a Mongo URI:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="syntax"><code>mongodump <span class="nt">--uri</span><span class="o">=</span><span class="s2">"mongodb://myuser:somepass@localhost:27107/mydb?ssl=false&amp;authSource=admin
</span></code></pre></div></div> <p>so if we go back to <a href="">users and roles definitions for MongoDB</a></p> <!-- cut --> <h1 id="mongodump-usage-card">mongodump usage card</h1> <div class="language-text highlighter-rouge"><div class="highlight"><pre class="syntax"><code>
Usage:

&gt; mongodump &lt;options&gt; &lt;connection-string&gt;

Export the content of a running server into .bson files.

Specify a database with -d and a collection with -c to only dump that database or collection.

Connection strings must begin with mongodb:// or mongodb+srv://.

See http://docs.mongodb.com/database-tools/mongodump/ for more information.

general options:
      --help                                                print usage
      --version                                             print the tool version and exit
      --config=                                             path to a configuration file

verbosity options:
  -v, --verbose=&lt;level&gt;                                     more detailed log output (include multiple times for more verbosity, e.g. -vvvvv, or specify a numeric value, e.g. --verbose=N)
      --quiet                                               hide all log output

connection options:
  -h, --host=&lt;hostname&gt;                                     mongodb host to connect to (setname/host1,host2 for replica sets)
      --port=&lt;port&gt;                                         server port (can also use --host hostname:port)

ssl options:
      --ssl                                                 connect to a mongod or mongos that has ssl enabled
      --sslCAFile=&lt;filename&gt;                                the .pem file containing the root certificate chain from the certificate authority
      --sslPEMKeyFile=&lt;filename&gt;                            the .pem file containing the certificate and key
      --sslPEMKeyPassword=&lt;password&gt;                        the password to decrypt the sslPEMKeyFile, if necessary
      --sslCRLFile=&lt;filename&gt;                               the .pem file containing the certificate revocation list
      --sslFIPSMode                                         use FIPS mode of the installed openssl library
      --tlsInsecure                                         bypass the validation for server's certificate chain and host name

authentication options:
  -u, --username=&lt;username&gt;                                 username for authentication
  -p, --password=&lt;password&gt;                                 password for authentication
      --authenticationDatabase=&lt;database-name&gt;              database that holds the user's credentials
      --authenticationMechanism=&lt;mechanism&gt;                 authentication mechanism to use
      --awsSessionToken=&lt;aws-session-token&gt;                 session token to authenticate via AWS IAM

kerberos options:
      --gssapiServiceName=&lt;service-name&gt;                    service name to use when authenticating using GSSAPI/Kerberos (default: mongodb)
      --gssapiHostName=&lt;host-name&gt;                          hostname to use when authenticating using GSSAPI/Kerberos (default: &lt;remote server's address&gt;)

namespace options:
  -d, --db=&lt;database-name&gt;                                  database to use
  -c, --collection=&lt;collection-name&gt;                        collection to use

uri options:
      --uri=mongodb-uri                                     mongodb uri connection string

query options:
  -q, --query=                                              query filter, as a v2 Extended JSON string, e.g., '{"x":{"$gt":1}}'
      --queryFile=                                          path to a file containing a query filter (v2 Extended JSON)
      --readPreference=&lt;string&gt;|&lt;json&gt;                      specify either a preference mode (e.g. 'nearest') or a preference json object (e.g. '{mode: "nearest", tagSets: [{a: "b"}], maxStalenessSeconds: 123}')
      --forceTableScan                                      force a table scan (do not use $snapshot or hint _id). Deprecated since this is default behavior on WiredTiger

output options:
  -o, --out=&lt;directory-path&gt;                                output directory, or '-' for stdout (default: 'dump')
      --gzip                                                compress archive or collection output with Gzip
      --oplog                                               use oplog for taking a point-in-time snapshot
      --archive=&lt;file-path&gt;                                 dump as an archive to the specified path. If flag is specified without a value, archive is written to stdout
      --dumpDbUsersAndRoles                                 dump user and role definitions for the specified database
      --excludeCollection=&lt;collection-name&gt;                 collection to exclude from the dump (may be specified multiple times to exclude additional collections)
      --excludeCollectionsWithPrefix=&lt;collection-prefix&gt;    exclude all collections from the dump that have the given prefix (may be specified multiple times to exclude additional prefixes)
  -j, --numParallelCollections=                             number of collections to dump in parallel
      --viewsAsCollections                                  dump views as normal collections with their produced data, omitting standard collections
</code></pre></div></div> </div> </div> <div class="post"> <h1 class="post-title"> <a href="/new-post/"> New Post </a> </h1> <span class="post-date">07 Oct 2022</span> <div class="link-underline"> </div> </div> <div class="post"> <h1 class="post-title"> <a href="/google-colab-tips-tricks/"> Google ColaB Tips and Tricks </a> </h1> <span class="post-date">06 Oct 2022</span> <div class="link-underline"> <p>Stop Google Colab from disconnecting</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="syntax"><code><span class="kd">function</span> <span class="nx">ClickConnect</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Click Connect - Working</span><span class="dl">'</span><span class="p">)</span>
  <span class="nb">document</span>
    <span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#top-toolbar &gt; colab-connect-button</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">shadowRoot</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">#connect</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">click</span><span class="p">()</span>
<span class="p">}</span>
<span class="nx">intervalClick1</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(</span><span class="nx">ClickConnect</span><span class="p">,</span> <span class="mi">180000</span><span class="p">)</span>
</code></pre></div></div> <p>OR</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="syntax"><code><span class="kd">function</span> <span class="nx">ClickAddText</span><span class="p">(){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Click Add Text - Working</span><span class="dl">'</span><span class="p">);</span>
  <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">colab-toolbar-button#toolbar-add-text</span><span class="dl">'</span><span class="p">).</span><span class="nx">click</span><span class="p">();</span>
<span class="p">}</span>
<span class="nx">intervalClick2</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(</span><span class="nx">ClickAddText</span><span class="p">,</span> <span class="mi">240000</span><span class="p">);</span>
</code></pre></div></div> <h2 id="removal">Removal</h2> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="syntax"><code><span class="nx">clearInterval</span><span class="p">(</span><span class="nx">intervalClick1</span><span class="p">);</span>
<span class="nx">clearInterval</span><span class="p">(</span><span class="nx">intervalClick2</span><span class="p">);</span>
</code></pre></div></div> </div> </div> <div class="post"> <h1 class="post-title"> <a href="/large-scale-data-gathering-journey/"> My Journey with Large Scale Data Gathering </a> </h1> <span class="post-date">06 Oct 2022</span> <div class="link-underline"> <p>Create additional indexes on the DB</p> <h1 id="setting-up-authenticated-mongo">Setting up authenticated Mongo</h1> <h2 id="mongoconf">mongo.conf</h2> <div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="syntax"><code>
<span class="c1"># mongod.conf</span>

<span class="c1"># for documentation of all options, see:</span>
<span class="c1">#   http://docs.mongodb.org/manual/reference/configuration-options/</span>

<span class="c1"># where to write logging data.</span>
<span class="na">systemLog</span><span class="pi">:</span>
  <span class="na">destination</span><span class="pi">:</span> <span class="s">file</span>
  <span class="na">logAppend</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">path</span><span class="pi">:</span> <span class="s">mongod.log</span>

<span class="c1"># Where and how to store data.</span>
<span class="na">storage</span><span class="pi">:</span>
  <span class="na">dbPath</span><span class="pi">:</span> <span class="s">~/mongo/data</span>

<span class="c1"># how the process runs</span>
<span class="na">processManagement</span><span class="pi">:</span>
  <span class="na">fork</span><span class="pi">:</span> <span class="no">false</span>  <span class="c1"># fork and run in background</span>
  <span class="na">pidFilePath</span><span class="pi">:</span> <span class="s">/var/run/mongodb/mongod.pid</span>  <span class="c1"># location of pidfile</span>

<span class="c1"># network interfaces</span>
<span class="na">net</span><span class="pi">:</span>
  <span class="na">port</span><span class="pi">:</span> <span class="m">27017</span>
  <span class="c1"># Enter 0.0.0.0,:: to bind to all IPv4 and IPv6 addresses or, alternatively, use the net.bindIpAll setting.</span>
  <span class="na">bindIp</span><span class="pi">:</span> <span class="s">127.0.0.1, outside_access.domain.com</span>

<span class="na">security</span><span class="pi">:</span>
  <span class="na">authorization</span><span class="pi">:</span> <span class="s">enabled</span>
</code></pre></div></div> <p>Mongo restart comand with auth</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="syntax"><code>mongod <span class="nt">--bind_ip_all</span>  <span class="nt">--auth</span> <span class="nt">--port</span> 27017 <span class="nt">--dbpath</span> ~/mongo/data/
</code></pre></div></div> <h2 id="to-add-users--roles">To add users + roles</h2> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="syntax"><code>
    <span class="c1">// main admin user</span>
    <span class="nx">use</span> <span class="nx">admin</span>
    <span class="nx">db</span><span class="p">.</span><span class="nx">createUser</span><span class="p">({</span> <span class="na">user</span><span class="p">:</span> <span class="dl">"</span><span class="s2">***</span><span class="dl">"</span><span class="p">,</span> <span class="na">pwd</span><span class="p">:</span> <span class="nx">passwordPrompt</span><span class="p">(),</span> <span class="na">roles</span><span class="p">:</span> <span class="p">[{</span> <span class="na">role</span><span class="p">:</span> <span class="dl">"</span><span class="s2">root</span><span class="dl">"</span><span class="p">,</span> <span class="na">db</span><span class="p">:</span> <span class="dl">"</span><span class="s2">admin</span><span class="dl">"</span> <span class="p">},</span> <span class="p">{</span> <span class="na">role</span><span class="p">:</span> <span class="dl">"</span><span class="s2">dbOwner</span><span class="dl">"</span><span class="p">,</span> <span class="na">db</span><span class="p">:</span> <span class="dl">"</span><span class="s2">work_db</span><span class="dl">"</span> <span class="p">}]</span> <span class="p">})</span>

    <span class="c1">// specific DB user</span>
    <span class="nx">use</span> <span class="nx">work_db</span>
    <span class="nx">db</span><span class="p">.</span><span class="nx">createUser</span><span class="p">({</span> <span class="na">user</span><span class="p">:</span> <span class="dl">"</span><span class="s2">***</span><span class="dl">"</span><span class="p">,</span> <span class="na">pwd</span><span class="p">:</span> <span class="nx">passwordPrompt</span><span class="p">(),</span> <span class="na">roles</span><span class="p">:</span> <span class="p">[{</span> <span class="na">role</span><span class="p">:</span> <span class="dl">"</span><span class="s2">dbOwner</span><span class="dl">"</span><span class="p">,</span> <span class="na">db</span><span class="p">:</span> <span class="dl">"</span><span class="s2">work_db</span><span class="dl">"</span> <span class="p">}]</span> <span class="p">})</span>

</code></pre></div></div> <h2 id="connection-string">Connection string</h2> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="syntax"><code>connectionURI <span class="o">=</span> <span class="s2">"mongodb://user:pass@localhost:27017/?serverSelectionTimeoutMS=5000&amp;connectTimeoutMS=10000&amp;authSource=WORK_DB&amp;authMechanism=SCRAM-SHA-256"</span>
</code></pre></div></div> <h1 id="port-forwarding">Port Forwarding</h1> </div> </div> <div class="post"> <h1 class="post-title"> <a href="/compression-results-7z/"> Best Compression Results With 7z </a> </h1> <span class="post-date">30 Sep 2022</span> <div class="link-underline"> <p>For best 7z compression use</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="syntax"><code>7z a <span class="nt">-t7z</span> <span class="nt">-m0</span><span class="o">=</span>lzma <span class="nt">-mx</span><span class="o">=</span>9 <span class="nt">-mfb</span><span class="o">=</span>64 <span class="nt">-md</span><span class="o">=</span>32m <span class="nt">-ms</span><span class="o">=</span>on archive.7z dir1
</code></pre></div></div> <p>Switches explained:</p> <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="syntax"><code><span class="nt">-t7z</span>   7z archive

<span class="nt">-m0</span><span class="o">=</span>lzma
       lzma method

<span class="nt">-mx</span><span class="o">=</span>9  level of compression <span class="o">=</span> 9 <span class="o">(</span>Ultra<span class="o">)</span>

<span class="nt">-mfb</span><span class="o">=</span>64
       number of fast bytes <span class="k">for </span>LZMA <span class="o">=</span> 64
<span class="nt">-md</span><span class="o">=</span>32m
       dictionary size <span class="o">=</span> 32 megabytes

<span class="nt">-ms</span><span class="o">=</span>on solid archive <span class="o">=</span> on
</code></pre></div></div> <p>7z is available on most standard Linux distros</p> <p>Max OS - install via homebrew</p> <div class="language-html highlighter-rouge"><div class="highlight"><pre class="syntax"><code>brew install p7zip
</code></pre></div></div> <h2 id="extras">Extras</h2> <p>7z command reference:</p> <div class="language-text highlighter-rouge"><div class="highlight"><pre class="syntax"><code>
7-Zip [64] 17.04 : Copyright (c) 1999-2021 Igor Pavlov : 2017-08-28
p7zip Version 17.04 (locale=utf8,Utf16=on,HugeFiles=on,64 bits,16 CPUs x64)

Usage: 7z &lt;command&gt; [&lt;switches&gt;...] &lt;archive_name&gt; [&lt;file_names&gt;...]

&lt;Commands&gt;
  a : Add files to archive
  b : Benchmark
  d : Delete files from archive
  e : Extract files from archive (without using directory names)
  h : Calculate hash values for files
  i : Show information about supported formats
  l : List contents of archive
  rn : Rename files in archive
  t : Test integrity of archive
  u : Update files to archive
  x : eXtract files with full paths

&lt;Switches&gt;
  -- : Stop switches parsing
  @listfile : set path to listfile that contains file names
  -ai[r[-|0]]{@listfile|!wildcard} : Include archives
  -ax[r[-|0]]{@listfile|!wildcard} : eXclude archives
  -ao{a|s|t|u} : set Overwrite mode
  -an : disable archive_name field
  -bb[0-3] : set output log level
  -bd : disable progress indicator
  -bs{o|e|p}{0|1|2} : set output stream for output/error/progress line
  -bt : show execution time statistics
  -i[r[-|0]]{@listfile|!wildcard} : Include filenames
  -m{Parameters} : set compression Method
    -mmt[N] : set number of CPU threads
    -mx[N] : set compression level: -mx1 (fastest) ... -mx9 (ultra)
  -o{Directory} : set Output directory
  -p{Password} : set Password
  -r[-|0] : Recurse subdirectories
  -sa{a|e|s} : set Archive name mode
  -scc{UTF-8|WIN|DOS} : set charset for for console input/output
  -scs{UTF-8|UTF-16LE|UTF-16BE|WIN|DOS|{id}} : set charset for list files
  -scrc[CRC32|CRC64|SHA1|SHA256|*] : set hash function for x, e, h commands
  -sdel : delete files after compression
  -seml[.] : send archive by email
  -sfx[{name}] : Create SFX archive
  -si[{name}] : read data from stdin
  -slp : set Large Pages mode
  -slt : show technical information for l (List) command
  -snh : store hard links as links
  -snl : store symbolic links as links
  -sni : store NT security information
  -sns[-] : store NTFS alternate streams
  -so : write data to stdout
  -spd : disable wildcard matching for file names
  -spe : eliminate duplication of root folder for extract command
  -spf : use fully qualified file paths
  -ssc[-] : set sensitive case mode
  -ssw : compress shared files
  -stl : set archive timestamp from the most recently modified file
  -stm{HexMask} : set CPU thread affinity mask (hexadecimal number)
  -stx{Type} : exclude archive type
  -t{Type} : Set type of archive
  -u[-][p#][q#][r#][x#][y#][z#][!newArchiveName] : Update options
  -v{Size}[b|k|m|g] : Create volumes
  -w[{path}] : assign Work directory. Empty path means a temporary directory
  -x[r[-|0]]{@listfile|!wildcard} : eXclude filenames
  -y : assume Yes on all queries
</code></pre></div></div> </div> </div> </div> <div class="pagination"> <a class="pagination-item older" href="/page2/">Older</a> <span class="pagination-item newer">Newer</span> </div> </div> </body> </html>
