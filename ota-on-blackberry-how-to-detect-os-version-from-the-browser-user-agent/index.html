<!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us"> <head> <!-- Global site tag (gtag.js) - Google Analytics --> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2630485-14"></script> <script> window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'UA-2630485-14'); </script> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta http-equiv="content-type" content="text/html; charset=utf-8"> <!-- Enable responsiveness on mobile devices--> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"> <title> OTA on BlackBerry - How to Detect OS Version From the Browser User Agent &middot; Inteist </title> <!-- CSS --> <link rel="stylesheet" href="/public/css/poole.css"> <link rel="stylesheet" href="/public/css/hyde.css"> <link href='//fonts.googleapis.com/css?family=Fjalla+One|Lato|Droid+Sans+Mono' rel='stylesheet' type='text/css'> <link rel="canonical" href=" https://inteist.com/ota-on-blackberry-how-to-detect-os-version-from-the-browser-user-agent/" /> <!-- Default pygments --> <link rel="stylesheet" href="/public/css/extra/pygments/monokai.css"> <!-- Icons --> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png"> <link rel="shortcut icon" href="/public/favicon.ico"> <!-- RSS --> <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml"> <!-- Google Adsense Validation --> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9336216488761027" crossorigin="anonymous"></script> </head> <body> <div class="sidebar"> <div class="container sidebar-sticky"> <div class="sidebar-about"> <h1 id="site-name"> <a href="/"> Inteist </a> </h1> <p class="lead">I code for living</p> </div> <nav class="sidebar-nav"> <!-- <a class="sidebar-nav-item" href="/">Home</a> --> <a class="sidebar-nav-item" href="/pages">Pages</a> <a class="sidebar-nav-item" href="/dev-resources">Dev Resources</a> <a class="sidebar-nav-item" href="/figlet">Figlet</a> <a class="sidebar-nav-item" href="/git">Git Tips</a> <div class="sidebar-spacer">&nbsp;</div> <a class="sidebar-nav-item" href="/search">Search</a> <a class="sidebar-nav-item" href="/calendar">Posts Calendar</a> <a class="sidebar-nav-item" href="/tags">Tags</a> <a class="sidebar-nav-item" href="/archive">Archive</a> <a class="sidebar-nav-item" href="/me">Me</a> </nav> <p class="copyright">&copy; 2010 - 2023</p> </div> </div> <div class="content container"> <div class="search-bar"> <a href="/search"><img src="/public/img/search-bar-l.png" alt="Search" height="60px"></a> </div> <div class="post link-underline"> <!-- Title --> <h1 class="post-title">OTA on BlackBerry - How to Detect OS Version From the Browser User Agent</h1> <!-- Description --> <span class="post-date" title="446 words">~ 3 min read. Published 04 Mar 2011</span> <p>I do an OTA (over the air) distribution for BlackBerry. Some time ago, I wrote here how to [link id='206' text='setup the mime types for the OTA distribution on Amazon S3']. Luckily now, S3 has got a new and very useful web interface, as well as improved mime type detection. They still get the file types not exactly right, but close enough so that the OTA installation for BlackBerry works on "autodetect" settings just fine.</p> <p>This is however not about S3, this is about detecting the proper OS version of the BlackBerry OS from the user agent of the browser using a few very simple regular expressions. Â The code is tailored to PHP, but you can easily adapt it to any language that supports Perl style regular expressions, or you can adapt the reg. expressions as well based on this simple idea:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="syntax"><code>
       <span class="nv">$agent</span> <span class="o">=</span> <span class="c1">//get user agent raw string</span>

        <span class="k">if</span> <span class="p">(</span><span class="nb">preg_match</span><span class="p">(</span><span class="s2">"/BlackBerry/i"</span><span class="p">,</span> <span class="nv">$agent</span><span class="p">))</span> <span class="p">{</span>

            <span class="k">if</span> <span class="p">(</span><span class="nb">preg_match</span><span class="p">(</span><span class="s2">"/6\.0\../i"</span><span class="p">,</span> <span class="nv">$agent</span><span class="p">))</span> <span class="p">{</span>
                <span class="nv">$newRelease</span><span class="p">[</span><span class="s1">'os_folder'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"6.0"</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">preg_match</span><span class="p">(</span><span class="s2">"/5\.0\../i"</span><span class="p">,</span> <span class="nv">$agent</span><span class="p">))</span> <span class="p">{</span>
                <span class="nv">$newRelease</span><span class="p">[</span><span class="s1">'os_folder'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"5.0"</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">preg_match</span><span class="p">(</span><span class="s2">"/4\.7\../i"</span><span class="p">,</span> <span class="nv">$agent</span><span class="p">))</span> <span class="p">{</span>
                <span class="nv">$newRelease</span><span class="p">[</span><span class="s1">'os_folder'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"4.7"</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">preg_match</span><span class="p">(</span><span class="s2">"/4\.6\../i"</span><span class="p">,</span> <span class="nv">$agent</span><span class="p">))</span> <span class="p">{</span>
                <span class="nv">$newRelease</span><span class="p">[</span><span class="s1">'os_folder'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"4.6"</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">preg_match</span><span class="p">(</span><span class="s2">"/4\.5\../i"</span><span class="p">,</span> <span class="nv">$agent</span><span class="p">))</span> <span class="p">{</span>
                <span class="nv">$newRelease</span><span class="p">[</span><span class="s1">'os_folder'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"4.5"</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">preg_match</span><span class="p">(</span><span class="s2">"/4\.3\../i"</span><span class="p">,</span> <span class="nv">$agent</span><span class="p">))</span> <span class="p">{</span>
                <span class="nv">$newRelease</span><span class="p">[</span><span class="s1">'os_folder'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"4.3"</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">preg_match</span><span class="p">(</span><span class="s2">"/4\.2\.1/i"</span><span class="p">,</span> <span class="nv">$agent</span><span class="p">))</span> <span class="p">{</span>
                <span class="nv">$newRelease</span><span class="p">[</span><span class="s1">'os_folder'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"4.2.1"</span><span class="p">;</span>
            <span class="p">}</span>

            <span class="c1">//Form your download URL here</span>

        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="c1">//This is not BlackBerry user agent</span>
        <span class="p">}</span>

</code></pre></div></div> <p>Nothing complicated, but this should give a start point to any one tying to serve appropriate bundle via OTA.</p> <p>&nbsp;</p> <p>If you were to use S3, then it would basically be:</p> <div class="language-php highlighter-rouge"><div class="highlight"><pre class="syntax"><code>
<span class="c1">// The main link to S3</span>
<span class="nv">$downloadURL</span> <span class="o">=</span> <span class="s2">"https://s3.amazonaws.com/YOUR_BUCKET/releases/"</span> <span class="mf">.</span> <span class="nv">$newRelease</span><span class="p">[</span><span class="s1">'version_folder'</span><span class="p">]</span> <span class="mf">.</span> <span class="s2">"/"</span> <span class="mf">.</span> <span class="nv">$newRelease</span><span class="p">[</span><span class="s1">'os_folder'</span><span class="p">]</span> <span class="mf">.</span> <span class="s2">"/YourAppName.jad"</span><span class="p">;</span>

</code></pre></div></div> <p>Post your thoughts/corrections in the comments!</p> </div> <!-- TAGs LIST --> <div class="tag-links-list" style="text-align: right;"> <a href="/tag/blackberry/" <span style="font-size: .6rem;">#blackberry</span></a>&nbsp;&nbsp; <a href="/tag/code/" <span style="font-size: .6rem;">#code</span></a>&nbsp;&nbsp; <a href="/tag/ota/" <span style="font-size: .6rem;">#ota</span></a>&nbsp;&nbsp; </div> <!-- RELATED POSTS --> <div class="related"> <h3 id="similar-posts">Related Posts</h3> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <ul class="related-posts"> <li> <h4> <a href="/subset-test-in-java/"> Subset Test in Java </a> <small>13 Nov 2015</small> </h4> </li> </ul> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <ul class="related-posts"> <li> <h4> <a href="/clang-format-style-file-for-ios-projects/"> clang-format Style File for iOS Projects </a> <small>13 Sep 2015</small> </h4> </li> </ul> <!-- RELATED POSTS --> <ul class="related-posts"> <li> <h4> <a href="/clang-format-shell-script-to-format-all-files-in-a-folder/"> Shell Script to Format all Files in a Folder using clang-format </a> <small>13 Sep 2015</small> </h4> </li> </ul> <!-- RELATED POSTS --> <ul class="related-posts"> <li> <h4> <a href="/uncrustify-whole-ios-project/"> Uncrustify Whole iOS Project </a> <small>24 Aug 2015</small> </h4> </li> </ul> </div> <!-- LATEST POSTS --> <div class="related"> <h3 id="latest-posts">Latest Posts</h3> <ul class="related-posts"> <li> <h4> <a href="/automated-snapshots-digital-ocean-backups/"> Automated Snapshots on Digital Ocean Instead of Backups </a> &nbsp;&nbsp;<small>01 Apr 2023</small> </h4> </li> <li> <h4> <a href="/derived-data-deletion-useful-commands/"> DerivedData Deletion - Useful Commands </a> &nbsp;&nbsp;<small>26 Mar 2023</small> </h4> </li> <li> <h4> <a href="/openssl-apple-silicon/"> openSSL on Apple Silicon </a> &nbsp;&nbsp;<small>24 Mar 2023</small> </h4> </li> <li> <h4> <a href="/crontab-cheatsheet/"> Crontab CheatSheet </a> &nbsp;&nbsp;<small>20 Mar 2023</small> </h4> </li> </ul> </div> <div id="disqus_thread"></div> <script type="text/javascript"> /* * * CONFIGURATION VARIABLES * * */ var disqus_shortname = 'inteist'; /* * * DON'T EDIT BELOW THIS LINE * * */ (function () { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); </script> </div> </body> </html>
