<!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us"> <head> <link href="http://gmpg.org/xfn/11" rel="profile"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta http-equiv="content-type" content="text/html; charset=utf-8"> <!-- Enable responsiveness on mobile devices--> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"> <title> OTA on BlackBerry - How to Detect OS Version From the Browser User Agent &middot; Inteist </title> <!-- CSS --> <link rel="stylesheet" href="/public/css/poole.css"> <link rel="stylesheet" href="/public/css/hyde.css"> <link href='http://fonts.googleapis.com/css?family=Fjalla+One|Lato|Droid+Sans+Mono' rel='stylesheet' type='text/css'> <!-- Default pygments --> <link rel="stylesheet" href="/public/css/extra/pygments/monokai.css"> <!-- Icons --> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png"> <link rel="shortcut icon" href="/public/favicon.ico"> <!-- RSS --> <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml"> <!-- Google Analytics --> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-2630485-14', 'auto'); ga('send', 'pageview'); </script> </head> <body> <div class="sidebar"> <div class="container sidebar-sticky"> <div class="sidebar-about"> <h1> <a href="/"> Inteist </a> </h1> <p class="lead">I code for living</p> </div> <nav class="sidebar-nav"> <!-- <a class="sidebar-nav-item" href="/">Home</a> --> <a class="sidebar-nav-item" href="/dev-resources/">Dev Resources</a> <a class="sidebar-nav-item" href="/figlet/">Figlet</a> <a class="sidebar-nav-item" href="/git/">Git Tips</a> <div class="sidebar-spacer">&nbsp;</div> <a class="sidebar-nav-item" href="/tags/">Tags</a> <a class="sidebar-nav-item" href="/archive/">Archive</a> <a class="sidebar-nav-item" href="/me/">Me</a> </nav> <p class="copyright">&copy; 2010 </p> </div> </div> <div class="content container"> <div class="reading-time"> <p title="342 words">~ 2 min read</p> </div> <div class="post link-underline"> <h1 class="post-title">OTA on BlackBerry - How to Detect OS Version From the Browser User Agent</h1> <span class="post-date">04 Mar 2011</span> <p>I do an OTA (over the air) distribution for BlackBerry. Some time ago, I wrote here how to [link id='206' text='setup the mime types for the OTA distribution on Amazon S3']. Luckily now, S3 has got a new and very useful web interface, as well as improved mime type detection. They still get the file types not exactly right, but close enough so that the OTA installation for BlackBerry works on "autodetect" settings just fine.</p> <p>This is however not about S3, this is about detecting the proper OS version of the BlackBerry OS from the user agent of the browser using a few very simple regular expressions. Â The code is tailored to PHP, but you can easily adapt it to any language that supports Perl style regular expressions, or you can adapt the reg. expressions as well based on this simple idea:</p> <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="x">       $agent = //get user agent raw string</span>

<span class="x">        if (preg_match(&quot;/BlackBerry/i&quot;, $agent)) {</span>

<span class="x">            if (preg_match(&quot;/6\.0\../i&quot;, $agent)) {</span>
<span class="x">                $newRelease[&#39;os_folder&#39;] = &quot;6.0&quot;;</span>
<span class="x">            }</span>
<span class="x">            if (preg_match(&quot;/5\.0\../i&quot;, $agent)) {</span>
<span class="x">                $newRelease[&#39;os_folder&#39;] = &quot;5.0&quot;;</span>
<span class="x">            }</span>
<span class="x">            if (preg_match(&quot;/4\.7\../i&quot;, $agent)) {</span>
<span class="x">                $newRelease[&#39;os_folder&#39;] = &quot;4.7&quot;;</span>
<span class="x">            }</span>
<span class="x">            if (preg_match(&quot;/4\.6\../i&quot;, $agent)) {</span>
<span class="x">                $newRelease[&#39;os_folder&#39;] = &quot;4.6&quot;;</span>
<span class="x">            }</span>
<span class="x">            if (preg_match(&quot;/4\.5\../i&quot;, $agent)) {</span>
<span class="x">                $newRelease[&#39;os_folder&#39;] = &quot;4.5&quot;;</span>
<span class="x">            }</span>
<span class="x">            if (preg_match(&quot;/4\.3\../i&quot;, $agent)) {</span>
<span class="x">                $newRelease[&#39;os_folder&#39;] = &quot;4.3&quot;;</span>
<span class="x">            }</span>
<span class="x">            if (preg_match(&quot;/4\.2\.1/i&quot;, $agent)) {</span>
<span class="x">                $newRelease[&#39;os_folder&#39;] = &quot;4.2.1&quot;;</span>
<span class="x">            }</span>

<span class="x">            //Form your download URL here</span>

<span class="x">        } else {</span>
<span class="x">            //This is not BlackBerry user agent</span>
<span class="x">        }</span>
</code></pre></div> <p>Nothing complicated, but this should give a start point to any one tying to serve appropriate bundle via OTA.</p> <p>&nbsp;</p> <p>If you were to use S3, then it would basically be:</p> <div class="highlight"><pre><code class="language-php" data-lang="php"><span class="x">// The main link to S3</span>
<span class="x">$downloadURL = &quot;https://s3.amazonaws.com/YOUR_BUCKET/releases/&quot; . $newRelease[&#39;version_folder&#39;] . &quot;/&quot; . $newRelease[&#39;os_folder&#39;] . &quot;/YourAppName.jad&quot;;</span>
</code></pre></div> <p>Post your thoughts/corrections in the comments!</p> </div> <!-- TAGs LIST --> <div class="tag-links-list" style="text-align: right;"> <a href="/tag/blackberry/"<span style="font-size: .6rem;">#blackberry</span></a>&nbsp;&nbsp; <a href="/tag/code/"<span style="font-size: .6rem;">#code</span></a>&nbsp;&nbsp; <a href="/tag/ota/"<span style="font-size: .6rem;">#ota</span></a>&nbsp;&nbsp; </div> <!-- SIMILAR POSTS --> <div class="related"> <h3>Similar Posts</h3> <ul class="related-posts"> <li> <h4> <a href="/subset-test-in-java/"> Subset Test in Java </a> <small>13 Nov 2015</small> </h4> </li> </ul> </div> <!-- LATEST POSTS --> <div class="related"> <h3>Latest Posts</h3> <ul class="related-posts"> <li> <h4> <a href="/git-trello-integration/"> Git + Trello Integration </a> <small>23 May 2016</small> </43> </li> <li> <h4> <a href="/google-i-o-videos-list/"> Google I/O Videos List </a> <small>20 May 2016</small> </43> </li> <li> <h4> <a href="/git-salvaging-lost-commits/"> Git - Salvaging Lost Commits </a> <small>07 Mar 2016</small> </43> </li> <li> <h4> <a href="/system-chaos-quote/"> System Chaos - Quote </a> <small>29 Feb 2016</small> </43> </li> </ul> </div> <div id="disqus_thread"></div> <script type="text/javascript"> /* * * CONFIGURATION VARIABLES * * */ var disqus_shortname = 'inteist'; /* * * DON'T EDIT BELOW THIS LINE * * */ (function() { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); </script> </div> </body> </html>
