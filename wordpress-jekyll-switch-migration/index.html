<!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us"> <head> <!-- Global site tag (gtag.js) - Google Analytics --> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2630485-14"></script> <script> window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'UA-2630485-14'); </script> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta http-equiv="content-type" content="text/html; charset=utf-8"> <!-- Enable responsiveness on mobile devices--> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"> <title> Switching From Wordpress to Jekyll in 20 Minutes &middot; Inteist </title> <!-- CSS --> <link rel="stylesheet" href="/public/css/poole.css"> <link rel="stylesheet" href="/public/css/hyde.css"> <link href='//fonts.googleapis.com/css?family=Fjalla+One|Lato|Droid+Sans+Mono' rel='stylesheet' type='text/css'> <link rel="canonical" href=" https://inteist.com/wordpress-jekyll-switch-migration/" /> <!-- Default pygments --> <link rel="stylesheet" href="/public/css/extra/pygments/monokai.css"> <!-- Icons --> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png"> <link rel="shortcut icon" href="/public/favicon.ico"> <!-- RSS --> <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml"> <!-- Google Adsense Validation --> <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9336216488761027" crossorigin="anonymous"></script> </head> <body> <div class="sidebar"> <div class="container sidebar-sticky"> <div class="sidebar-about"> <h1 id="site-name"> <a href="/"> Inteist </a> </h1> <p class="lead">I code for living</p> </div> <nav class="sidebar-nav"> <!-- <a class="sidebar-nav-item" href="/">Home</a> --> <a class="sidebar-nav-item" href="/pages">Pages</a> <a class="sidebar-nav-item" href="/dev-resources">Dev Resources</a> <a class="sidebar-nav-item" href="/figlet">Figlet</a> <a class="sidebar-nav-item" href="/git">Git Tips</a> <div class="sidebar-spacer">&nbsp;</div> <a class="sidebar-nav-item" href="/search">Search</a> <a class="sidebar-nav-item" href="/calendar">Posts Calendar</a> <a class="sidebar-nav-item" href="/tags">Tags</a> <a class="sidebar-nav-item" href="/archive">Archive</a> <a class="sidebar-nav-item" href="/me">Me</a> </nav> <p class="copyright">&copy; 2010 - 2023</p> </div> </div> <div class="content container"> <div class="search-bar"> <a href="/search"><img src="/public/img/search-bar-l.png" alt="Search" height="60px"></a> </div> <div class="post link-underline"> <!-- Title --> <h1 class="post-title">Switching From Wordpress to Jekyll in 20 Minutes</h1> <!-- Description --> <span class="post-date" title="410 words">~ 3 min read. Published 07 Mar 2015</span> <p>First I needed to redirect my old <code class="language-html highlighter-rouge">/YYYY/MM/TITLE</code> structure to the new structure without any date prefix. Jekyll by default will let you do that easily with <code class="language-html highlighter-rouge">permalink: /:title</code>. But that does not solve the problem of having inbound links redirect to the right place on the new blog. It is pretty easy to solve with the <strong>redirect_from</strong> “native” jekyll plugin. The only thing that remains now is to add the <code class="language-html highlighter-rouge">redirect_from:/old_uri_with_date</code> to each new post.</p> <p>For that I whipped the following short ruby script and to run over all the files I just used some bash.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="syntax"><code><span class="k">for </span>f <span class="k">in</span> <span class="k">*</span><span class="p">;</span> <span class="k">do </span>ruby process.rb <span class="nv">$f</span><span class="p">;</span> <span class="k">done</span>  
</code></pre></div></div> <p>Where <code class="language-html highlighter-rouge">process.rb</code> is:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="syntax"><code><span class="no">ARGV</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">a</span><span class="o">|</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="sr">/^\d+/</span><span class="p">])</span>
    <span class="nb">puts</span> <span class="n">a</span>

    <span class="n">text</span> <span class="o">=</span> <span class="no">File</span><span class="p">.</span><span class="nf">read</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="n">new_contents</span> <span class="o">=</span> <span class="n">text</span><span class="p">.</span><span class="nf">gsub</span><span class="p">(</span><span class="sr">/^redirect_from:(.*)/</span><span class="p">,</span> <span class="s2">"redirect_from: </span><span class="si">#{</span><span class="vg">$1</span><span class="si">}#{</span><span class="n">a</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

    <span class="c1"># To merely print the contents of the file, use:</span>
    <span class="nb">puts</span> <span class="n">new_contents</span>

    <span class="c1"># To write changes to the file, use:</span>
    <span class="no">File</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s2">"w"</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span><span class="n">file</span><span class="o">|</span> <span class="n">file</span><span class="p">.</span><span class="nf">puts</span> <span class="n">new_contents</span> <span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div> <p>That gets us about 80% of the transition covered. If you heavily customized your WP content with various plugins to pull this may create issues because the imported would probably not be able to convert them in an intelligent way.</p> <p>The things that still remained for me were</p> <ul> <li>images</li> <li>code blocks</li> </ul> <p>So…</p> <ul> <li>For images I moved all the images to the <code class="language-html highlighter-rouge">/media</code> folder and used regex magic to update the paths.</li> <li>For code blocks I also used some regex magic.</li> </ul> <p>Sublime Editor made it very easy to test and apply the regex. Using Git to track the changes and revert if I blew it proved useful too.</p> <p>Below you can find some of the regex I used:</p> <p>S: <code class="language-html highlighter-rouge">^redirect_from: (\d+)-(\d+)-(\d+)-(.*).md$</code></p> <p>R: <code class="language-html highlighter-rouge">redirect_from: /$1/$2/$4/</code></p> <hr /> <p>S: <code class="language-html highlighter-rouge"><span class="nt">&lt;pre&gt;</span>([\s\S]*?)\[cc lang="(.*?)"(.*)\]</code> (greedy match)</p> <p>R: <code class="language-html highlighter-rouge">\n</code>``$3\n`</p> <hr /> <p>S: <code class="language-html highlighter-rouge">\[cc lang="(.*?)" (.*)"\]</code></p> <p>R: <code class="language-html highlighter-rouge">\n</code>``$1\n`</p> <hr /> <p>S: <code class="language-html highlighter-rouge">\[/cc\]([\s\S]*?)<span class="nt">&lt;/pre&gt;</span></code></p> <p>R: <code class="language-html highlighter-rouge">\n</code>``\n`</p> </div> <!-- TAGs LIST --> <div class="tag-links-list" style="text-align: right;"> <a href="/tag/jekyll/" <span style="font-size: .6rem;">#jekyll</span></a>&nbsp;&nbsp; <a href="/tag/migration/" <span style="font-size: .6rem;">#migration</span></a>&nbsp;&nbsp; <a href="/tag/tech/" <span style="font-size: .6rem;">#tech</span></a>&nbsp;&nbsp; <a href="/tag/blog/" <span style="font-size: .6rem;">#blog</span></a>&nbsp;&nbsp; </div> <!-- RELATED POSTS --> <div class="related"> <h3 id="similar-posts">Related Posts</h3> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <ul class="related-posts"> <li> <h4> <a href="/reviving-the-blog-upgrading-ruby-jekyll-and-all-the-gems/"> Reviving the blog - upgrading Ruby Jekyll and all the Gems </a> <small>30 Jan 2022</small> </h4> </li> </ul> <!-- RELATED POSTS --> <ul class="related-posts"> <li> <h4> <a href="/long-5-years-silence/"> It's been long 5 years of silence reviving my Jekyll blog </a> <small>27 Jan 2022</small> </h4> </li> </ul> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <ul class="related-posts"> <li> <h4> <a href="/some-basic-useful-virtualbox-terminal-commands/"> Some Basic Useful VirtualBox terminal commands </a> <small>29 Feb 2016</small> </h4> </li> </ul> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <!-- RELATED POSTS --> <ul class="related-posts"> <li> <h4> <a href="/handy-adb-oneliners-for-android/"> Handy adb Oneliners for Android </a> <small>16 Jun 2015</small> </h4> </li> </ul> </div> <!-- LATEST POSTS --> <div class="related"> <h3 id="latest-posts">Latest Posts</h3> <ul class="related-posts"> <li> <h4> <a href="/derived-data-deletion-useful-commands/"> 2023-03-26-derived-data-deletion-useful-commands </a> &nbsp;&nbsp;<small>26 Mar 2023</small> </h4> </li> <li> <h4> <a href="/openssl-apple-silicon/"> openSSL on Apple Silicon </a> &nbsp;&nbsp;<small>24 Mar 2023</small> </h4> </li> <li> <h4> <a href="/crontab-cheatsheet/"> Crontab CheatSheet </a> &nbsp;&nbsp;<small>20 Mar 2023</small> </h4> </li> <li> <h4> <a href="/mongodump-backup-script/"> MongoDump - backup script example </a> &nbsp;&nbsp;<small>14 Oct 2022</small> </h4> </li> </ul> </div> <div id="disqus_thread"></div> <script type="text/javascript"> /* * * CONFIGURATION VARIABLES * * */ var disqus_shortname = 'inteist'; /* * * DON'T EDIT BELOW THIS LINE * * */ (function () { var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true; dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js'; (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq); })(); </script> </div> </body> </html>
