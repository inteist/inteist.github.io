<!DOCTYPE html> <html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us"> <head> <link href="http://gmpg.org/xfn/11" rel="profile"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta http-equiv="content-type" content="text/html; charset=utf-8"> <!-- Enable responsiveness on mobile devices--> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1"> <title> Switching From Wordpress to Jekyll in 20 Minutes &middot; Inteist </title> <!-- CSS --> <link rel="stylesheet" href="/public/css/poole.css"> <link rel="stylesheet" href="/public/css/hyde.css"> <link href='http://fonts.googleapis.com/css?family=Fjalla+One|Lato|Droid+Sans+Mono' rel='stylesheet' type='text/css'> <!-- Default pygments --> <link rel="stylesheet" href="/public/css/extra/pygments/monokai.css"> <!-- Icons --> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png"> <link rel="shortcut icon" href="/public/favicon.ico"> <!-- RSS --> <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml"> </head> <body> <div class="sidebar"> <div class="container sidebar-sticky"> <div class="sidebar-about"> <h1> <a href="/"> Inteist </a> </h1> <p class="lead">I code for living</p> </div> <nav class="sidebar-nav"> <!-- <a class="sidebar-nav-item" href="/">Home</a> --> <a class="sidebar-nav-item" href="/dev-resources">Dev Resources</a> <div class="sidebar-spacer">&nbsp;</div> <a class="sidebar-nav-item" href="/tags">Tags</a> <a class="sidebar-nav-item" href="/archive">Archive</a> <a class="sidebar-nav-item" href="/about">About</a> </nav> <p class="copyright">&copy; 2010 </p> </div> </div> <div class="content container"> <div class="reading-time"> <p title="303 words">~ 3 min read</p> </div> <div class="post"> <h1 class="post-title">Switching From Wordpress to Jekyll in 20 Minutes</h1> <span class="post-date">07 Mar 2015</span> <div class="link-underline"> <p>First I needed to redirect my old <code>/YYYY/MM/TITLE</code> structure to the new structure without any date prefix. Jekyll by default will let you do that easily with <code>permalink: /:title</code>. But that does not solve the problem of having inbound links redirect to the right place on the new blog. It is pretty easy to solve with the <strong>redirect_from</strong> &quot;native&quot; jekyll plugin. The only thing that remains now is to add the <code>redirect_from:/old_uri_with_date</code> to each new post.</p> <p>For that I whipped the following short ruby script and to run over all the files I just used some bash.</p> <div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="k">for</span> f in *<span class="p">;</span> <span class="k">do</span> ruby process.rb <span class="nv">$f</span><span class="p">;</span> <span class="k">done</span>  
</code></pre></div> <p>Where <code>process.rb</code> is:</p> <div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="no">ARGV</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">a</span><span class="o">|</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">a</span><span class="o">[</span><span class="sr">/^\d+/</span><span class="o">]</span><span class="p">)</span>
    <span class="nb">puts</span> <span class="n">a</span>

    <span class="n">text</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="n">new_contents</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">gsub</span><span class="p">(</span><span class="sr">/^redirect_from:(.*)/</span><span class="p">,</span> <span class="s2">&quot;redirect_from: </span><span class="si">#{</span><span class="vg">$1</span><span class="si">}#{</span><span class="n">a</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># To merely print the contents of the file, use:</span>
    <span class="nb">puts</span> <span class="n">new_contents</span>

    <span class="c1"># To write changes to the file, use:</span>
    <span class="no">File</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="p">{</span><span class="o">|</span><span class="n">file</span><span class="o">|</span> <span class="n">file</span><span class="o">.</span><span class="n">puts</span> <span class="n">new_contents</span> <span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div> <p>That gets us about 80% of the transition covered. If you heavily customized your WP content with various plugins to pull this may create issues because the imported would probably not be able to convert them in an intelligent way.</p> <p>The things that still remained for me were</p> <ul> <li>images</li> <li>code blocks</li> </ul> <p>So...</p> <ul> <li>For images I moved all the images to the <code>/media</code> folder and used regex magic to update the paths. </li> <li>For code blocks I also used some regex magic. </li> </ul> <p>Sublime Editor made it very easy to test and apply the regex. Using Git to track the changes and revert if I blew it proved useful too. </p> <p>Below you can find some of the regex I used:</p> <p>S: <code>^redirect_from: (\d+)-(\d+)-(\d+)-(.*).md$</code></p> <p>R: <code>redirect_from: /$1/$2/$4/</code></p> <hr> <p>S: <code>&lt;pre&gt;([\s\S]*?)\[cc lang=&quot;(.*?)&quot;(.*)\]</code> (greedy match)</p> <p>R: <code>\n</code>`<code>$3\n</code></p> <hr> <p>S: <code>\[cc lang=&quot;(.*?)&quot; (.*)&quot;\]</code></p> <p>R: <code>\n</code>`<code>$1\n</code></p> <hr> <p>S: <code>\[/cc\]([\s\S]*?)&lt;/pre&gt;</code> </p> <p>R: <code>\n</code>`<code>\n</code></p> </div> </div> <!-- SIMILAR POSTS --> <div class="related"> <h3>Similar Posts</h3> <ul class="related-posts"> <li> <h4> <a href="/my-new-404-page"> My New 404 Page </a> <small>23 Apr 2015</small> </h4> </li> </ul> </div> <!-- LATEST POSTS --> <div class="related"> <h3>Latest Posts</h3> <ul class="related-posts"> <li> <h4> <a href="/atom-highlighting-search-results-in-a-dark-theme"> Atom.io Highlighting the Search Results in a Dark Theme </a> <small>29 Apr 2015</small> </43> </li> <li> <h4> <a href="/keycdn-introduces-node-library"> KeyCDN introduces Node library </a> <small>28 Apr 2015</small> </43> </li> <li> <h4> <a href="/my-new-404-page"> My New 404 Page </a> <small>23 Apr 2015</small> </43> </li> <li> <h4> <a href="/handling-invisibles-in-atom-editor"> Handling invisibles in Atom.io </a> <small>23 Apr 2015</small> </43> </li> </ul> </div> </div> <!-- Google Analytics --> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-2630485-14', 'auto'); ga('send', 'pageview'); </script> </body> </html>
